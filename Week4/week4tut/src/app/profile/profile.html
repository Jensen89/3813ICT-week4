<!DOCTYPE html>
<div class="row">
  <div class="col-md-8 mx-auto">
    <div class="card">
      <div class="card-header">
        <h2>Profile Page</h2>
      </div>
      
      <div class="card-body">
        <!-- Success Message -->
        <div class="alert alert-success" *ngIf="successMessage">
          {{ successMessage }}
        </div>

        <!-- Profile Image -->
        <div class="text-center mb-4">
          <img 
            src="https://via.placeholder.com/150" 
            alt="Profile Image" 
            class="rounded-circle"
            style="width: 150px; height: 150px;">
        </div>

        <!-- View Mode -->
        <div *ngIf="user && !editMode">
          <div class="row mb-3">
            <div class="col-md-4"><strong>Username:</strong></div>
            <div class="col-md-8">{{ user.username }}</div>
          </div>
          
          <div class="row mb-3">
            <div class="col-md-4"><strong>Email:</strong></div>
            <div class="col-md-8">{{ user.email }}</div>
          </div>
          
          <div class="row mb-3">
            <div class="col-md-4"><strong>Birthdate:</strong></div>
            <div class="col-md-8">{{ user.birthdate }}</div>
          </div>
          
          <div class="row mb-3">
            <div class="col-md-4"><strong>Age:</strong></div>
            <div class="col-md-8">{{ user.age }}</div>
          </div>
          
          <button class="btn btn-primary" (click)="toggleEditMode()">
            Edit Profile
          </button>
        </div>

        <!-- Edit Mode -->
        <div *ngIf="user && editMode">
          <form (ngSubmit)="saveProfile()">
            <div class="mb-3">
              <label for="username" class="form-label">Username</label>
              <input 
                type="text" 
                class="form-control" 
                id="username" 
                [(ngModel)]="editUsername" 
                name="username"
                required>
            </div>
            
            <div class="mb-3">
              <label for="email" class="form-label">Email (cannot be changed)</label>
              <input 
                type="email" 
                class="form-control" 
                id="email" 
                [value]="user.email" 
                disabled>
            </div>
            
            <div class="mb-3">
              <label for="birthdate" class="form-label">Birthdate</label>
              <input 
                type="date" 
                class="form-control" 
                id="birthdate" 
                [(ngModel)]="editBirthdate" 
                name="birthdate"
                required>
            </div>
            
            <div class="mb-3">
              <label for="age" class="form-label">Age</label>
              <input 
                type="number" 
                class="form-control" 
                id="age" 
                [(ngModel)]="editAge" 
                name="age"
                min="1"
                max="150"
                required>
            </div>
            
            <div class="d-flex gap-2">
              <button type="submit" class="btn btn-success">Save Changes</button>
              <button type="button" class="btn btn-secondary" (click)="cancelEdit()">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>